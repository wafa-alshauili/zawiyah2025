# دليل نشر الخادم على Railway 🚂

## الخطوة 1: إنشاء حساب على Railway

### 1.1 الذهاب إلى Railway
- افتح المتصفح واذهب إلى: **[railway.app](https://railway.app)**
- اضغط على **"Start Building"** أو **"Login"**

### 1.2 تسجيل الدخول
- اختر **"Login with GitHub"** 
- ادخل بيانات GitHub الخاصة بك (wafa-alshauili)
- اقبل الصلاحيات المطلوبة

---

## الخطوة 2: إنشاء مشروع جديد

### 2.1 بدء مشروع جديد
- بعد تسجيل الدخول، اضغط على **"New Project"**
- اختر **"Deploy from GitHub repo"**

### 2.2 اختيار المستودع
- ابحث عن **"zawiyah2025"** أو اختره من القائمة
- اضغط على المستودع: **"wafa-alshauili/zawiyah2025"**

### 2.3 تحديد مجلد الخادم
- ⚠️ **مهم جداً:** اضغط على **"Configure"** أو **"Settings"**
- في قسم **"Root Directory"** أو **"Source"**:
  - أدخل: **`server`** (بدون علامة /)
- احفظ الإعدادات

---

## الخطوة 3: تكوين متغيرات البيئة

### 3.1 الذهاب إلى إعدادات المتغيرات
- في لوحة تحكم المشروع، ابحث عن تبويب **"Variables"** أو **"Environment"**
- اضغط عليه

### 3.2 إضافة المتغيرات المطلوبة
أضف المتغيرات التالية واحداً تلو الآخر:

**المتغير الأول:**
- **Name:** `PORT`
- **Value:** `3001`

**المتغير الثاني:**
- **Name:** `NODE_ENV`
- **Value:** `production`

**المتغير الثالث:** (سيتم تحديثه لاحقاً)
- **Name:** `CLIENT_URL`
- **Value:** `https://zawiyah2025.vercel.app`

**المتغير الرابع:**
- **Name:** `CORS_ORIGIN`
- **Value:** `https://zawiyah2025.vercel.app`

---

## الخطوة 4: نشر الخادم

### 4.1 بدء النشر
- اضغط على **"Deploy"** أو انتظر النشر التلقائي
- ستظهر سجلات البناء (Build Logs)

### 4.2 انتظار اكتمال النشر
- انتظر حتى ترى رسالة نجاح مثل:
  ```
  ✅ Build successful
  ✅ Deployment successful
  ```

### 4.3 الحصول على رابط الخادم
- بعد النشر الناجح، ستجد رابط الخادم في أعلى الصفحة
- سيكون شبيه بـ: `https://zawiyah-server-production-xxxx.up.railway.app`
- **احفظ هذا الرابط!** ستحتاجه للعميل

---

## الخطوة 5: اختبار الخادم

### 5.1 فتح رابط الخادم
- انسخ رابط الخادم والصقه في المتصفح
- يجب أن ترى رسالة مثل: `Zawiyah Server is running`

### 5.2 اختبار API
- جرب زيارة: `[رابط-الخادم]/api/classrooms`
- يجب أن ترى بيانات JSON للقاعات

---

## الخطوة 6: ملاحظات مهمة

### ✅ علامات النجاح:
- Build logs تظهر "successful"
- رابط الخادم يفتح بنجاح
- API endpoints تعمل وترجع بيانات JSON

### ⚠️ في حالة المشاكل:
- تحقق من Build logs للأخطاء
- تأكد أن Root Directory مضبوط على `server`
- تأكد أن جميع متغيرات البيئة مضافة بشكل صحيح

### 📝 معلومات إضافية:
- Railway يعطيك **500GB نقل بيانات مجاناً** شهرياً
- يدعم **النشر التلقائي** عند كل push لـ GitHub
- يحتفظ بـ **سجلات كاملة** لجميع العمليات

---

## الخطوة 7: الخطوة التالية

بعد نجاح نشر الخادم:
1. احفظ رابط الخادم من Railway
2. استخدم هذا الرابط في نشر العميل على Vercel
3. اختبر التزامن بين الخادم والعميل

---

## 🆘 الحصول على المساعدة

إذا واجهت أي مشكلة:
- تحقق من Build Logs في Railway
- تأكد من صحة اسم المجلد (server)
- راجع متغيرات البيئة

**رابط المستودع:** https://github.com/wafa-alshauili/zawiyah2025
**مجلد الخادم:** server/