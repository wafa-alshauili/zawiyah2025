# Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Ù„Ù†Ø¸Ø§Ù… Ø²Ø§ÙˆÙŠØ© 2025

Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ ÙŠÙˆØ¶Ø­ ÙƒÙŠÙÙŠØ© Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Ù„Ù†Ø¸Ø§Ù… Ø­Ø¬Ø² Ø§Ù„Ù‚Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ© Ù…Ø¹ Ø§Ù„ØªØ²Ø§Ù…Ù† Ø§Ù„ÙÙˆØ±ÙŠ Ø¹Ø¨Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©.

## ğŸŒŸ Ø§Ù„Ù…Ø²Ø§ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Firebase

- **ØªØ²Ø§Ù…Ù† ÙÙˆØ±ÙŠ**: ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ØªØ¸Ù‡Ø± ÙÙˆØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
- **Ù…ÙˆØ«ÙˆÙ‚ÙŠØ© Ø¹Ø§Ù„ÙŠØ©**: Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ÙˆØ­Ù…Ø§ÙŠØ© Ù…Ù† ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- **Ø£Ø¯Ø§Ø¡ Ø³Ø±ÙŠØ¹**: ØªØ®Ø²ÙŠÙ† Ø³Ø­Ø§Ø¨ÙŠ Ø³Ø±ÙŠØ¹ Ù…Ø¹ ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ù„Ù„ÙˆØ¶Ø¹ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„
- **Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙˆØ³Ø¹**: ÙŠØ¯Ø¹Ù… Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†ÙŠÙ†
- **Ø£Ù…Ø§Ù† Ù…ØªÙ‚Ø¯Ù…**: Ù‚ÙˆØ§Ø¹Ø¯ Ø£Ù…Ø§Ù† Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

## ğŸš€ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯

### 1. Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Firebase

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ [Firebase Console](https://console.firebase.google.com/)
2. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹" (Create a project)
3. Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: `zawiyah2025`
4. ÙØ¹Ù‘Ù„ Google Analytics (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
5. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"

### 2. Ø¥Ø¹Ø¯Ø§Ø¯ Firestore Database

1. ÙÙŠ Firebase ConsoleØŒ Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Firestore Database**
2. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª" (Create database)
3. Ø§Ø®ØªØ± "Start in test mode" Ù„Ù„Ø¨Ø¯Ø§ÙŠØ©
4. Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£Ù‚Ø±Ø¨ (Ù…Ø«Ù„ `europe-west3` Ù„Ù„Ø´Ø±Ù‚ Ø§Ù„Ø£ÙˆØ³Ø·)

### 3. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªÙƒÙˆÙŠÙ†

#### Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (Frontend):
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Project Settings** > **General**
   - Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ±Ø³ âš™ï¸ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø§Ù„Ø£ÙŠØ³Ø±
   - Ø§Ø®ØªØ± "Project settings"
   
2. ÙÙŠ Ù‚Ø³Ù… "Your apps"ØŒ Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø¥Ø¶Ø§ÙØ© ØªØ·Ø¨ÙŠÙ‚" > "Web"
   - Ø³ØªØ¬Ø¯ Ù‚Ø³Ù… "Your apps" ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„ØµÙØ­Ø©
   - Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ÙˆÙŠØ¨ `</>`
   
3. Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: `zawiyah2025-client`
   - Ù„Ø§ ØªØ®ØªØ± "Firebase Hosting" Ø§Ù„Ø¢Ù†
   - Ø§Ù†Ù‚Ø± "Register app"
   
4. **Ø§Ù†Ø³Ø® ÙƒÙˆØ¯ Ø§Ù„ØªÙƒÙˆÙŠÙ† Ù…Ù† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¸Ø§Ù‡Ø±:**
   ```javascript
   // Ø³ØªØ¸Ù‡Ø± Ø´Ø§Ø´Ø© Ù…Ø«Ù„ Ù‡Ø°Ù‡ - Ø§Ù†Ø³Ø® Ø§Ù„Ù‚ÙŠÙ… Ù…Ù†Ù‡Ø§:
   const firebaseConfig = {
     apiKey: "AIzaSyD...",                    // Ø§Ù†Ø³Ø® Ù‡Ø°Ø§
     authDomain: "zawiyah2025.firebaseapp.com",
     projectId: "zawiyah2025",               // Ø§Ù†Ø³Ø® Ù‡Ø°Ø§
     storageBucket: "zawiyah2025.appspot.com",
     messagingSenderId: "123456789",         // Ø§Ù†Ø³Ø® Ù‡Ø°Ø§
     appId: "1:123456789:web:abc123def456"   // Ø§Ù†Ø³Ø® Ù‡Ø°Ø§
   };
   ```
   
5. **Ø¥Ø°Ø§ Ù„Ù… ØªØ¬Ø¯ Ø§Ù„ÙƒÙˆØ¯ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹:**
   - Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Project Settings > General
   - Ø§Ø¨Ø­Ø« Ø¹Ù† ØªØ·Ø¨ÙŠÙ‚Ùƒ ÙÙŠ Ù‚Ø³Ù… "Your apps"
   - Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© "Config" Ø£Ùˆ `</>`

#### Ù„Ù„Ø®Ø§Ø¯Ù… (Backend):
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Project Settings** > **Service accounts**
2. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Generate new private key"
3. Ø§Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù ÙƒÙ€ `firebase-admin-key.json` ÙÙŠ Ù…Ø¬Ù„Ø¯ `/server`

### 4. ØªÙƒÙˆÙŠÙ† Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©

Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù `.env` ÙÙŠ Ø§Ù„Ø¬Ø°Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:

```bash
# Firebase Configuration
NEXT_PUBLIC_FIREBASE_API_KEY=your-api-key-here
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=zawiyah2025.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=zawiyah2025
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=zawiyah2025.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789
NEXT_PUBLIC_FIREBASE_APP_ID=1:123456789:web:abcdef123456

# Backend Firebase Admin
FIREBASE_PROJECT_ID=zawiyah2025

# Server
PORT=3001
NODE_ENV=development
```

### 5. Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø£Ù…Ø§Ù† ÙÙŠ Firestore

ÙÙŠ Firebase Console > Firestore > RulesØŒ Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø¨Ø§Ù„ØªØ§Ù„ÙŠ:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
    match /bookings/{bookingId} {
      allow read, write: if true; // Ù…ÙØªÙˆØ­ Ù„Ù„Ø¬Ù…ÙŠØ¹ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
    }
    
    // Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù‚Ø§Ø¹Ø§Øª
    match /classrooms/{classroomId} {
      allow read: if true;
      allow write: if true; // ÙŠÙ…ÙƒÙ† ØªÙ‚ÙŠÙŠØ¯Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹
    }
    
    // Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ø²Ù…Ù†ÙŠØ©
    match /timeslots/{timeslotId} {
      allow read: if true;
      allow write: if true; // ÙŠÙ…ÙƒÙ† ØªÙ‚ÙŠÙŠØ¯Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹
    }
  }
}
```

## ğŸ“¦ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…

### 1. ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ¨Ø¹ÙŠØ§Øª

```bash
# ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„ÙƒÙ„Ø§ÙŠÙ†Øª
cd client
npm install

# ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±
cd server
npm install
```

### 2. ØªØ±Ø­ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©

```bash
cd server
node firebase-migration.js
```

### 3. ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

```bash
# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±
cd server
npm start

# ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙ„Ø§ÙŠÙ†Øª (ÙÙŠ terminal Ø¢Ø®Ø±)
cd client
npm run dev
```

## ğŸ”§ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### ÙÙŠ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª React:

```javascript
import firebaseService from '../services/firebase';
import { useEffect, useState } from 'react';

function BookingsPage() {
  const [bookings, setBookings] = useState([]);

  useEffect(() => {
    // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©
    const unsubscribe = firebaseService.subscribeToBookings(setBookings);
    
    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ Ø¹Ù†Ø¯ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…ÙƒÙˆÙ†
    return () => unsubscribe();
  }, []);

  const createBooking = async (bookingData) => {
    try {
      await firebaseService.createBooking(bookingData);
      // Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø³ÙŠØ­Ø¯Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ø¨Ø± Ø§Ù„Ù…Ø³ØªÙ…Ø¹
    } catch (error) {
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø¬Ø²:', error);
    }
  };

  return (
    <div>
      {bookings.map(booking => (
        <div key={booking.id}>{booking.teacher_name}</div>
      ))}
    </div>
  );
}
```

### ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±:

```javascript
const firebaseAdminService = require('./services/firebaseAdmin');

// Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯
app.post('/api/bookings', async (req, res) => {
  try {
    const booking = await firebaseAdminService.createBooking(req.body);
    res.json(booking);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});
```

## ğŸ“Š Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Firestore

### Collection: bookings
```javascript
{
  classroom_id: "classroom_doc_id",
  teacher_name: "Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…",
  subject: "Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©",
  date: Timestamp,
  time_slot: 1-10,
  notes: "Ù…Ù„Ø§Ø­Ø¸Ø§Øª",
  status: "active|cancelled|completed",
  created_at: Timestamp,
  updated_at: Timestamp
}
```

### Collection: classrooms
```javascript
{
  name_ar: "Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³ Ø£",
  name_en: "Grade 6 A",
  type: "classroom|smart|assembly|lab",
  grade: 6,
  section: "Ø£",
  capacity: 30,
  equipment: ["projector", "smartboard"],
  isActive: true
}
```

### Collection: timeslots
```javascript
{
  slot_number: 1,
  name_ar: "Ø§Ù„Ø­ØµØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
  name_en: "Period 1",
  start_time: "07:30",
  end_time: "08:15",
  type: "academic|assembly|activity",
  order: 1,
  is_bookable: true
}
```

## ğŸ” Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:
- ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªÙƒÙˆÙŠÙ†
- ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Firestore Ù…ÙØ¹Ù„ ÙÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
- ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù `firebase-admin-key.json`

### Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª:
- Ø±Ø§Ø¬Ø¹ Ù‚ÙˆØ§Ø¹Ø¯ Firestore Security Rules
- ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ ØªØ³Ù…Ø­ Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ù„ÙƒØªØ§Ø¨Ø©

### Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„ØªØ²Ø§Ù…Ù†:
- ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† ÙŠØ¹Ù…Ù„ÙˆÙ† Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
- Ø±Ø§Ø¬Ø¹ console Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ JavaScript

## ğŸš€ Ø§Ù„Ù†Ø´Ø± Ù„Ù„Ø¥Ù†ØªØ§Ø¬

1. **ØªØ­Ø¯ÙŠØ« Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø£Ù…Ø§Ù†** Ù„ØªÙ‚ÙŠÙŠØ¯ Ø§Ù„ÙˆØµÙˆÙ„
2. **Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©** ÙÙŠ Ù…Ù†ØµØ© Ø§Ù„Ù†Ø´Ø±
3. **ØªÙØ¹ÙŠÙ„ Backup** Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Firebase
4. **Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡** Ø¹Ø¨Ø± Firebase Performance Monitoring

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù…

Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£Ùˆ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§ØªØŒ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø©:
- [Firebase Documentation](https://firebase.google.com/docs)
- [Firestore Guide](https://firebase.google.com/docs/firestore)
- Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙÙŠ `/client/services/firebase.js` Ùˆ `/server/services/firebaseAdmin.js`